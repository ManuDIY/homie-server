<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Homie Configurator</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">

    <style>
      .container {
        max-width: 600px;
      }

      .alert {
        position: fixed;
        top: 0;
        right: 0;

        z-index: 2147483647;
      }
    </style>

  </head>
  <body>
    <div class="container">
      <div class="alert alert-danger" role="alert">
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        <span class="sr-only">Error:</span>
        Cannot connect to the device. Are you sure you are connected to its Wi-Fi?
      </div>

      <div class="page-header">
        <h1>Connect your device</h1>
        <p class="lead">Your device needs to be connected to its server to work correctly.</p>
      </div>

      <p>First, we need to connect to your home Wi-Fi. Select your network in the list below.</p>

      <div class="list-group" id="networks">
        <p id="networks_loading"><b>Loading list of networks...</b></p>
      </div>

      <form>
        <div class="form-group" id="form_wifi_ssid">
          <label for="wifi_ssid">Wi-Fi SSID</label>
          <input type="text" class="form-control" id="wifi_ssid" placeholder="SSID" maxlength="32" required>
          <p class="help-block">Maximum of 32 characters</p>
        </div>

        <div class="form-group" id="form_wifi_password">
          <label for="wifi_password">Wi-Fi password</label>
          <input type="password" class="form-control" id="wifi_password" placeholder="Password" maxlength="63" required>
          <p class="help-block">Maximum of 63 characters</p>
        </div>

        <hr>

        <p>Next, we need to know where on your network is located the master server.</p>

        <div class="form-group">
          <label for="homie_host">Homie host</label>
          <input type="text" class="form-control" id="homie_host" placeholder="Host" maxlength="63" required>
          <p class="help-block">Maximum of 63 characters</p>
        </div>

        <hr>

        <p>Finally, let's name your device.</p>

        <div class="form-group">
          <label for="device_name">Device name</label>
          <input type="text" class="form-control" id="device_name" placeholder="Name" maxlength="63" pattern="^[^\-][a-z0-9\-]+[^\-]$" required>
          <p class="help-block">Lowercase alphanumeric with optional dashes. Must not start or end with a dash.<br>
          Maximum of 32 characters. The name must be unique on your homie network</p>
        </div>

        <p>By clicking on <span class="label label-primary">Submit</span> below, your device will reboot and the red LED will start blinking. If everything was configured correctly, it should stop blinking within a minute. If it continues to blink slowly (every second), there is a problem with Wi-Fi credentials. If it blinks faster (every 0.2 second), there is a problem with MQTT credentials. You can reset the device anytime to reconfigure, by pressing the <span class="label label-default">FLASH</span> button for a dozen of seconds until the LED stays on.</p>

        <button type="submit" class="btn btn-primary" id="submit">Submit</button>
      </form>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script src="js/main.js"></script>
  </body>
</html>
